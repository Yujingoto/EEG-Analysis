/* ---------- brand ---------- */
:root{
  --brand:#0b157a;          /* 濃い青 */
  --brand-weak:#cfd0e6;     /* 薄い青灰 */
  --ink:#111;
  --bg:#fff;
  --accent:#2bb5a1;
}

/* 本文 */
body{color:var(--ink);background:var(--bg);line-height:1.85;}

/* ---------- グローバルヘッダー（sticky） ---------- */
.header{
  position: sticky; top: 0; z-index: 50; background:#fff;
  border-bottom:2px solid var(--brand); box-shadow:0 2px 6px rgba(0,0,0,.06);
}
.fixed-table{width:100%;table-layout:fixed;border-collapse:collapse}
.fixed-table th{vertical-align:top;text-align:left;padding:.25rem .5rem}
.header details{margin:.25rem 0;}
.header details summary{cursor:pointer;font-weight:700}
.header .gnav,.header .index{list-style:none;margin:.25rem 0 0;padding-left:1rem}
.header .index li{margin:.15rem 0}
.header a{text-decoration:none;border-bottom:1px dotted rgba(0,0,0,.25);}
.header a:hover{border-bottom-color:var(--brand);}

/* ---------- H1 / H2 ---------- */
main{ counter-reset:h1; }
main h1{ counter-increment:h1; counter-reset:h2; }

h1{
  position:relative; margin:1.25rem 0 .75rem;
  padding:1.1rem 1rem 1.1rem 8.5rem;
  border:3px solid var(--brand);
  font-size:clamp(1.6rem,2.2vw,2.2rem); font-weight:800;
}
h1::before{
  content:counter(h1, decimal-leading-zero);
  position:absolute; left:.7rem; top:.5rem; bottom:.5rem;
  width:6.2rem; display:flex; align-items:center; justify-content:center;
  background:var(--brand); color:#fff; font-weight:800; font-size:2.2rem;
}
h1::after{
  content:""; position:absolute; left:6.9rem; top:.5rem; bottom:.5rem; width:2rem;
  background:linear-gradient(75deg, var(--brand) 0 50%, transparent 50% 100%);
}

h2{
  position:relative; margin:1.2rem 0 .6rem; padding:.6rem 1rem;
  background:#cfd0e6; border-left:8px solid var(--brand); border-bottom:3px solid var(--brand);
  font-size:clamp(1.25rem,1.6vw,1.6rem); font-weight:800;
}

/* ---------- 情報ボックス ---------- */
.box{
  margin:1rem 0; padding:1rem 1.1rem;
  background:#f7fbff; border:2px solid #87d1e5; border-radius:10px;
  box-shadow:0 1px 0 rgba(0,0,0,.03) inset;
}
.box .title{font-weight:800;color:#d53535;margin-bottom:.25rem;}
.box.note{background:#fffdf7;border-color:#f2cf66;}
.box.tip{ background:#f4fffb;border-color:#7ad9c2;}
.em-red{color:#d53535;font-weight:700;}

/* ---------- 本文幅/余白 ---------- */
main.content{max-width:1024px;margin:0 auto;padding:1rem;}
main p{margin:.6rem 0;}
main ul,main ol{margin:.5rem 0 .8rem 1.4rem}

/* ===================== レイアウト（本文 + 右TOC） ===================== */
#layout .page-wrap{
  max-width:1200px; margin:0 auto; padding:0 1rem;
  display:grid; grid-template-columns:1fr; gap:1.25rem;
}
@media (min-width:1100px){
  #layout .page-wrap{ grid-template-columns:minmax(0,1fr) 300px; }
}

/* コンテンツ列：横はみ出しは列の中で止める（右TOCは影響なし） */
#layout .content{
  min-width:0; max-width:100%;
  overflow-x:hidden;   /* ← ページ全体じゃなく“左列だけ”横はみ出しを抑止 */
  position:relative;
}

/* 画像/表/コードは自分だけ横スクロール。画像はブロック化で版面を壊さない */
img, video { max-width:100%; height:auto; display:block; }
table{ display:block; max-width:100%; overflow-x:auto; }
pre{ max-width:100%; overflow:auto; }

/* 右サイド TOC（PCのみ表示、sticky） */
.toc-side{
  display:none;
  background:#fff; border:1px solid #e5e7eb; border-radius:10px;
  box-shadow:0 2px 6px rgba(0,0,0,.04);
  padding:.75rem .75rem 1rem; overflow:auto;
}
@media (min-width:1100px){
  .toc-side{ display:block; position:sticky; top:72px; height:calc(100vh - 88px); }
}

/* 目次（共通見た目） */
.toc-side-title{font-weight:800;margin:.25rem 0 .5rem;border-bottom:1px solid #e5e7eb;padding-bottom:.25rem;}
.toc-box{margin:.75rem 0 1rem;padding:.75rem 1rem;border:1px solid #e5e7eb;border-radius:10px;background:#fafcff;}
.toc-list{list-style:none;padding-left:.25rem;margin:0;}
.toc-list>li{margin:.35rem 0;}
.toc-list a{text-decoration:none;color:#0b157a;border-bottom:1px dashed rgba(11,21,122,.35);}
.toc-list a:hover{border-bottom-color:#0b157a;}
.toc-list li ul{list-style:none;margin:.25rem 0 .35rem .9rem;padding-left:0;border-left:2px solid rgba(11,21,122,.15);padding-left:.6rem;}

/* ===================== MathJax：数式だけ横スクロール ===================== */
/* ラッパー .math-scroll の箱の中だけ横スクロールを許可（PC/スマホ共通） */
.math-scroll{
  display:block;
  max-width:100%;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
  will-change:scroll-position;
}

/* 中のブロック数式は“自分の幅のまま”。列ははみ出さず、箱がスクロールを受け持つ */
.math-scroll mjx-container[display="true"]{
  display:inline-block;
  max-width:none;
  padding:.25rem 0;
}
.math-scroll mjx-container[display="true"] mjx-math{
  white-space:nowrap;
}

/* デフォの MathJax は幅制限のみ（インラインは触らない） */
mjx-container{ max-width:100%; }
mjx-container:not([display="true"]){ max-width:100%; }
