---
layout: null
sitemap: false
permalink: /search.json
---

[
{% comment %} pages + posts + 他collections（title有りのみ） {% endcomment %}
{% assign docs = site.pages | where_exp:'p','p.search != false' %}
{% assign docs = docs | concat: site.posts %}
{% for col in site.collections %}
  {% unless col.label == 'posts' %}
    {% assign docs = docs | concat: col.docs %}
  {% endunless %}
{% endfor %}
{% assign docs = docs | where_exp:'d','d.title' %}
{% assign docs = docs | uniq %}

{% for d in docs %}
{
  "title": {{ d.title | strip | jsonify }},
  "url": {{ d.url | relative_url | jsonify }},
  "content": {{ d.content
    | strip_html
    | strip_newlines
    | replace: "\t"," "
    | replace: "  "," "
    | jsonify }}
}{% unless forloop.last %},{% endunless %}
{% endfor %}
]
